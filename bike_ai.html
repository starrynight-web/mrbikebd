<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bike Advisor AI</title>
    <style>
        :root {
            --primary-color: #e63946;
            --secondary-color: #f1faee;
            --accent-color: #a8dadc;
            --dark-color: #1d3557;
            --light-color: #f8f9fa;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
        }
        
        .bike-advisor-container {
            max-width: 1000px;
            margin: 20px auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .advisor-header {
            background: var(--dark-color);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .advisor-header h2 {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .advisor-header p {
            opacity: 0.8;
        }
        
        .chat-container {
            height: 400px;
            overflow-y: auto;
            padding: 20px;
            background: var(--secondary-color);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            line-height: 1.4;
        }
        
        .bot-message {
            align-self: flex-start;
            background: var(--accent-color);
            border-bottom-left-radius: 4px;
        }
        
        .user-message {
            align-self: flex-end;
            background: var(--primary-color);
            color: white;
            border-bottom-right-radius: 4px;
        }
        
        .input-area {
            display: flex;
            padding: 15px;
            background: white;
            border-top: 1px solid #eee;
        }
        
        .input-area input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 25px;
            outline: none;
            font-size: 16px;
        }
        
        .input-area button {
            margin-left: 10px;
            padding: 12px 20px;
            background: var(--dark-color);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .input-area button:hover {
            background: var(--primary-color);
        }
        
        .language-selector {
            display: flex;
            justify-content: center;
            padding: 10px;
            background: #f0f0f0;
            border-bottom: 1px solid #ddd;
        }
        
        .language-btn {
            padding: 5px 15px;
            margin: 0 5px;
            background: transparent;
            border: 1px solid #ccc;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .language-btn.active {
            background: var(--dark-color);
            color: white;
            border-color: var(--dark-color);
        }
        
        .typing-indicator {
            display: none;
            align-self: flex-start;
            background: var(--accent-color);
            padding: 12px 16px;
            border-radius: 18px;
            border-bottom-left-radius: 4px;
        }
        
        .typing-indicator span {
            height: 8px;
            width: 8px;
            background: var(--dark-color);
            border-radius: 50%;
            display: inline-block;
            margin: 0 2px;
            opacity: 0.6;
            animation: typing 1s infinite;
        }
        
        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        @media (max-width: 768px) {
            .bike-advisor-container {
                margin: 10px;
            }
            
            .message {
                max-width: 90%;
            }
            
            .chat-container {
                height: 350px;
            }
        }
    </style>
</head>
<body>
    <div class="bike-advisor-container">
        <div class="advisor-header">
            <h2>Mr Bikoo</h2>
            <p>Ask me about bikes - I know more than you</p>
        </div>
        
        <div class="language-selector">
            <button class="language-btn active" data-lang="en">English</button>
            <button class="language-btn" data-lang="bn">Bangla</button>
            <button class="language-btn" data-lang="banglish">Banglish</button>
        </div>
        
        <div class="chat-container" id="chatContainer">
            <div class="message bot-message">
                Hello! I'm your Bike Advisor AI. I can help you compare bikes, find the best value for money, and suggest where to buy. How can I assist you today?
            </div>
        </div>
        
        <div class="input-area">
            <input type="text" id="userInput" placeholder="Ask about bikes...">
            <button id="sendButton">Send</button>
        </div>
    </div>

    <!-- Import OpenAI client -->
    <script>
    const GOOGLE_API_KEY = 'AIzaSyBJvEFJIHY_gZdpAA_zIh2YYANKgJ9n_Ek';  

const chatContainer = document.getElementById('chatContainer');
const userInput = document.getElementById('userInput');
const sendButton = document.getElementById('sendButton');
const languageButtons = document.querySelectorAll('.language-btn');

let currentLanguage = 'en';

// Language selection
languageButtons.forEach(button => {
    button.addEventListener('click', function() {
        languageButtons.forEach(btn => btn.classList.remove('active'));
        this.classList.add('active');
        currentLanguage = this.getAttribute('data-lang');
        
        if (currentLanguage === 'en') {
            userInput.placeholder = 'Ask about bikes...';
        } else if (currentLanguage === 'bn') {
            userInput.placeholder = 'বাইক সম্পর্কে জিজ্ঞাসা করুন...';
        } else {
            userInput.placeholder = 'Bike somporke jiggasha korun...';
        }
    });
});

// Initial message based on language
const initialMessages = {
    en: "Hello! I'm your Bike Advisor AI. I can help you compare bikes, find the best value for money, and suggest where to buy. How can I assist you today?",
    bn: "হ্যালো! আমি আপনার বাইক অ্যাডভাইজর এআই। আমি আপনাকে বাইক তুলনা করতে, সেরা মূল্যের জন্য সেরা বাইক খুঁজে দিতে এবং কোথায় কিনবেন তা সাজেস্ট করতে সাহায্য করতে পারি। আজ আমি আপনাকে কীভাবে সাহায্য করতে পারি?",
    banglish: "Hello! Ami apnar Bike Advisor AI. Ami apnake bike tulona korte, sera muljer jonno sera bike khuje dite ebong kothay kinben ta suggest korte sahajjo korte pari. Aj ami apnake kibhabe sahajjo korte pari?"
};
document.querySelector('.bot-message').textContent = initialMessages[currentLanguage];

// Send message
async function sendMessage() {
    const message = userInput.value.trim();
    if (message === '') return;

    addMessageToChat(message, 'user');
    userInput.value = '';
    showTypingIndicator();

    try {
        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${GOOGLE_API_KEY}`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                contents: [
                    {
                        role: "model",
                        parts: [{ text: `You are Bike Advisor AI. Answer ONLY about bikes in ${currentLanguage} style. Do not discuss anything else.` }]
                    },
                    {
                        role: "user",
                        parts: [{ text: message }]
                    }
                ],
                generationConfig: {
                    temperature: 0.7,
                    maxOutputTokens: 500
                }
            })
        });

        const data = await response.json();
        hideTypingIndicator();

        if (data.candidates && data.candidates.length > 0 && data.candidates[0].content.parts[0].text) {
            addMessageToChat(data.candidates[0].content.parts[0].text, 'bot');
        } else if (data.error) {
            addMessageToChat(`⚠️ Error: ${data.error.message} (Check API key or rate limits)`, 'bot');
        } else {
            addMessageToChat("⚠️ No response from AI.", 'bot');
        }

    } catch (err) {
        hideTypingIndicator();
        console.error(err);
        addMessageToChat("⚠️ Error connecting to AI. Check console for details.", 'bot');
    }
}

sendButton.addEventListener('click', sendMessage);
userInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') sendMessage();
});

function addMessageToChat(message, sender) {
    const messageElement = document.createElement('div');
    messageElement.classList.add('message', sender === 'user' ? 'user-message' : 'bot-message');
    messageElement.textContent = message;
    chatContainer.appendChild(messageElement);
    chatContainer.scrollTop = chatContainer.scrollHeight;
}

function showTypingIndicator() {
    const typingIndicator = document.createElement('div');
    typingIndicator.classList.add('typing-indicator');
    typingIndicator.id = 'typingIndicator';
    typingIndicator.innerHTML = '<span></span><span></span><span></span>';
    chatContainer.appendChild(typingIndicator);
    chatContainer.scrollTop = chatContainer.scrollHeight;
}

function hideTypingIndicator() {
    const typingIndicator = document.getElementById('typingIndicator');
    if (typingIndicator) typingIndicator.remove();
}
</script>
</body>
</html>